<h> Top five questions in SO with R tags </h>

<p>When discussing performance with colleagues, teaching, sending a bug report or searching for guidance on mailing lists and here on SO, a <a href="http://stackoverflow.com/help/mcve">reproducible example</a> is often asked and always helpful.</p> <p>What are your tips for creating an excellent example? How do you paste data structures from <a href="/questions/tagged/r" class="post-tag" title="show questions tagged &#39;r&#39;" rel="tag">r</a> in a text format? What other information should you include?</p> <p>Are there other tricks in addition to using <code>dput()</code>, <code>dump()</code> or <code>structure()</code>? When should you include <code>library()</code> or <code>require()</code> statements? Which reserved words should one avoid, in addition to <code>c</code>, <code>df</code>, <code>data</code>, etc?</p> <p>How does one make a great <a href="/questions/tagged/r" class="post-tag" title="show questions tagged &#39;r&#39;" rel="tag">r</a> reproducible example?</p>


<p>I want to sort a <code>data.frame</code> by multiple columns in R. For example, with the <code>data.frame</code> below I would like to sort by column <code>z</code> (descending) then by column <code>b</code> (ascending): </p> <pre><code>dd &lt;- data.frame(b = factor(c("Hi", "Med", "Hi", "Low"), levels = c("Low", "Med", "Hi"), ordered = TRUE), x = c("A", "D", "A", "C"), y = c(8, 3, 9, 9), z = c(1, 1, 1, 2)) dd b x y z 1 Hi A 8 1 2 Med D 3 1 3 Hi A 9 1 4 Low C 9 2 </code></pre>


<p>Whenever I want to do something "map"py in <code>R</code>, I usually try to use a function in the <code>apply</code> family. (Side question: I still haven't learned <code>plyr</code> or <code>reshape</code> -- would <code>plyr</code> or <code>reshape</code> replace all of these entirely?)</p> <p>However, I've never quite understood the differences between them [how {<code>sapply</code>, <code>lapply</code>, etc.} apply the function to the input/grouped input, what the output will look like, or even what the input can be], so I often just go through them all until I get what I want.</p> <p>Can someone explain how to use which one when?</p> <p>[My current (probably incorrect/incomplete) understanding is...</p> <ol> <li><code>sapply(vec, f)</code>: input is a vector. output is a vector/matrix, where element <code>i</code> is <code>f(vec[i])</code> [giving you a matrix if <code>f</code> has a multi-element output]</li> <li><code>lapply(vec, f)</code>: same as <code>sapply</code>, but output is a list?</li> <li><code>apply(matrix, 1/2, f)</code>: input is a matrix. output is a vector, where element <code>i</code> is f(row/col i of the matrix)</li> <li><code>tapply(vector, grouping, f)</code>: output is a matrix/array, where an element in the matrix/array is the value of <code>f</code> at a grouping <code>g</code> of the vector, and <code>g</code> gets pushed to the row/col names</li> <li><code>by(dataframe, grouping, f)</code>: let <code>g</code> be a grouping. apply <code>f</code> to each column of the group/dataframe. pretty print the grouping and the value of <code>f</code> at each column.</li> <li><code>aggregate(matrix, grouping, f)</code>: similar to <code>by</code>, but instead of pretty printing the output, aggregate sticks everything into a dataframe.]</li> </ol>


<p>Given two data frames:</p> <pre><code>df1 = data.frame(CustomerId = c(1:6), Product = c(rep("Toaster", 3), rep("Radio", 3))) df2 = data.frame(CustomerId = c(2, 4, 6), State = c(rep("Alabama", 2), rep("Ohio", 1))) df1 # CustomerId Product # 1 Toaster # 2 Toaster # 3 Toaster # 4 Radio # 5 Radio # 6 Radio df2 # CustomerId State # 2 Alabama # 4 Alabama # 6 Ohio </code></pre> <p>How can I do database style, i.e., <a href="http://en.wikipedia.org/wiki/Join_%28SQL%29">sql style, joins</a>? That is, how do I get:</p> <ul> <li>An <a href="http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join">inner join</a> of <code>df1</code> and <code>df2</code>:<br> Return only the rows in which the left table have matching keys in the right table.</li> <li>An <a href="http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_join">outer join</a> of <code>df1</code> and <code>df2</code>:<br> Returns all rows from both tables, join records from the left which have matching keys in the right table.</li> <li>A <a href="http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join">left outer join (or simply left join)</a> of <code>df1</code> and <code>df2</code><br> Return all rows from the left table, and any rows with matching keys from the right table.</li> <li>A <a href="http://en.wikipedia.org/wiki/Join_%28SQL%29#Right_outer_join">right outer join</a> of <code>df1</code> and <code>df2</code><br> Return all rows from the right table, and any rows with matching keys from the left table.</li> </ul> <p>Extra credit:</p> <p>How can I do a SQL style select statement?</p>


<p>Apparently, folk have figured out how to make <a href="http://xkcd.com/">xkcd</a> style graphs <a href="http://mathematica.stackexchange.com/questions/11350/xkcd-style-graphs">in Mathematica</a> and <a href="http://tex.stackexchange.com/questions/74878/create-xkcd-style-diagram-in-tex">in LaTeX</a>. Can we do it in R? Ggplot2-ers? A geom_xkcd and/or theme_xkcd?</p> <p>I guess in base graphics, par(xkcd=TRUE)? How do I do it?</p> <p><img src="http://i.stack.imgur.com/f2UqI.png" alt="xkcd#1064" title="FYI: I&#39;ll be releasing a wolf into a randomly-chosen front yard sometime in the next 30 years. Now your fear is reasonable, and you don&#39;t need to feel embarrassed anymore. Problem solved!"></p> <p>As a first stab (and as much more elegantly shown below) in ggplot2, adding the jitter argument to a line makes for a great hand-drawn look. So - </p> <pre><code>ggplot(mapping=aes(x=seq(1,10,.1), y=seq(1,10,.1))) + geom_line(position="jitter", color="red", size=2) + theme_bw() </code></pre> <p>It makes for a nice example - but the axes and fonts appear trickier. Fonts appear solved (below), though. Is the only way to deal with axes to blank them out and draw them in by hand? Is there a more elegant solution? In particular, in ggplot2, can element_line in the new theme system be modified to take a jitter-like argument?</p>
